---
import { MapPin, DollarSign, CheckCircle, Phone, ArrowRight } from 'lucide-astro';

interface Props {
  venue: {
    name: string;
    type: string;
    location: string;
    price: string;
    desc: string;
    features: string[];
    img: string;
    imgAlt?: string;
  };
  color?: 'amber' | 'blue' | 'red' | 'rose' | 'indigo' | 'purple';
}

const { venue, color = 'purple' } = Astro.props;

const colorClasses = {
  purple: {
    badge: 'from-purple-600 to-fuchsia-600',
    titleHover: 'group-hover:text-purple-400',
    icon: 'text-purple-500',
    borderHover: 'hover:border-purple-500/50',
    shadowHover: 'hover:shadow-[0_0_30px_rgba(168,85,247,0.2)]',
    buttonHover: 'hover:bg-purple-600',
    buttonText: 'text-purple-100',
    checkBg: 'bg-purple-900/30 border-purple-500/30'
  },
  amber: {
    badge: 'from-amber-600 to-amber-500',
    titleHover: 'group-hover:text-amber-400',
    icon: 'text-amber-500',
    borderHover: 'hover:border-amber-500/50',
    shadowHover: 'hover:shadow-[0_0_30px_rgba(245,158,11,0.2)]',
    buttonHover: 'hover:bg-amber-600',
    buttonText: 'text-amber-100',
    checkBg: 'bg-amber-900/30 border-amber-500/30'
  },
  rose: {
    badge: 'from-rose-600 to-rose-500',
    titleHover: 'group-hover:text-rose-400',
    icon: 'text-rose-500',
    borderHover: 'hover:border-rose-500/50',
    shadowHover: 'hover:shadow-[0_0_30px_rgba(244,63,94,0.2)]',
    buttonHover: 'hover:bg-rose-600',
    buttonText: 'text-rose-100',
    checkBg: 'bg-rose-900/30 border-rose-500/30'
  },
  blue: {
    badge: 'from-blue-600 to-blue-500',
    titleHover: 'group-hover:text-blue-400',
    icon: 'text-blue-500',
    borderHover: 'hover:border-blue-500/50',
    shadowHover: 'hover:shadow-[0_0_30px_rgba(59,130,246,0.2)]',
    buttonHover: 'hover:bg-blue-600',
    buttonText: 'text-blue-100',
    checkBg: 'bg-blue-900/30 border-blue-500/30'
  }
};

const theme = colorClasses[color as keyof typeof colorClasses] || colorClasses.purple;
---

<article class={`glass-card group flex flex-col h-full ${theme.borderHover} ${theme.shadowHover}`}>
    <div class="h-64 bg-slate-900/50 relative overflow-hidden flex-shrink-0">
        <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-transparent to-transparent z-10"></div>
        <img
            src={venue.img}
            alt={venue.imgAlt || venue.name}
            loading="lazy"
            width="400"
            height="256"
            class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ease-in-out"
        />
        <div class={`absolute top-4 right-4 z-20 bg-gradient-to-r ${theme.badge} text-white text-xs font-bold px-4 py-1.5 rounded-full uppercase shadow-lg tracking-wider`}>
            {venue.type}
        </div>
    </div>

    <div class="p-8 relative flex flex-col flex-grow">
        <h3 class={`text-2xl font-bold text-white mb-3 ${theme.titleHover} transition-colors line-clamp-1`}>{venue.name}</h3>
        <p class="text-slate-400 text-sm mb-6 leading-relaxed bg-slate-950/30 p-4 rounded-xl border border-white/5 font-light">{venue.desc}</p>

        <div class="space-y-3 mb-6">
            <div class="flex items-center gap-3 text-sm text-slate-300">
                <MapPin class={`w-4 h-4 ${theme.icon}`} /> 
                <span class="font-medium text-slate-200">{venue.location}</span>
            </div>
            <div class="flex items-center gap-3 text-sm text-slate-300">
                <DollarSign class={`w-4 h-4 ${theme.icon}`} /> 
                <span class="font-medium text-slate-200">{venue.price}</span>
            </div>
        </div>

        <div class="mb-8 space-y-2 flex-grow">
            <div class="flex flex-wrap gap-2">
                {venue.features.map((feat) => (
                    <span class={`text-xs font-medium px-3 py-1.5 rounded-full flex items-center gap-1.5 text-slate-200 ${theme.checkBg}`}>
                        <CheckCircle size={10} class={theme.icon} /> {feat}
                    </span>
                ))}
            </div>
        </div>

        <button
            onclick="window.location.href = 'tel:01026264833'"
            class={`w-full bg-slate-800 ${theme.buttonHover} text-white hover:text-white py-4 rounded-xl font-bold transition-all duration-300 flex items-center justify-center gap-2 group/btn relative overflow-hidden`}
        >
            <div class="absolute inset-0 bg-white/20 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-500"></div>
            <Phone size={18} class="group-hover/btn:animate-wiggle" />
            <span class="tracking-widest text-sm relative z-10">가격 & 예약 문의</span>
            <ArrowRight size={16} class="opacity-0 group-hover/btn:opacity-100 group-hover/btn:translate-x-1 transition-all" />
        </button>
    </div>
</article>
