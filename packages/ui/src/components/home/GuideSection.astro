---
import { Phone, MessageCircle, MapPin, CheckCircle, CreditCard } from 'lucide-astro';
import HowToSchema from '../schema/HowToSchema.astro';
import type { RegionConfig } from '../../types/region';

interface Props {
  region: RegionConfig;
}

const { region } = Astro.props;

// 첫 방문 가이드 단계 - SEO 최적화
const guideSteps = [
  {
    number: 1,
    title: '상담 문의',
    description: '카카오톡 또는 전화로 서우실장에게 연락합니다. 방문 희망 날짜, 인원, 예산, 원하는 분위기를 알려주세요.',
    Icon: MessageCircle,
    tips: ['24시간 상담 가능', '예약금 없음']
  },
  {
    number: 2,
    title: '맞춤 추천',
    description: '15년 경력의 서우실장이 고객님의 취향과 예산에 맞는 최적의 업소를 추천해 드립니다.',
    Icon: CheckCircle,
    tips: ['투명한 가격 안내', '다양한 선택지 제공']
  },
  {
    number: 3,
    title: '픽업 안내',
    description: `${region.nearbyStations[0]} 도착 시 연락주시면 업소까지 안전하게 픽업 안내해 드립니다.`,
    Icon: MapPin,
    tips: ['역 근처 픽업 가능', '길 찾기 걱정 없음']
  },
  {
    number: 4,
    title: '입장 및 이용',
    description: '도착 후 원하시는 파트너를 선택하고, 편안한 분위기에서 프라이빗한 시간을 즐기세요.',
    Icon: CheckCircle,
    tips: ['취향 기반 매칭', '1:1 맞춤 세팅']
  },
  {
    number: 5,
    title: '결제 및 퇴장',
    description: '이용 후 현금 또는 카드로 결제합니다. 영수증 처리도 가능하며, 2차 이동 안내도 해드립니다.',
    Icon: CreditCard,
    tips: ['카드/현금 모두 가능', '영수증 처리 OK']
  }
];

// HowTo Schema용 단계 데이터
const howToSteps = guideSteps.map((step) => ({
  name: step.title,
  text: step.description
}));
---

<section class="py-24 bg-slate-900/30 relative">
  <HowToSchema
    name={`${region.name} 유흥 첫 방문 가이드`}
    description={`${region.name} 가라오케·하이퍼블릭 처음 방문하시는 분을 위한 5단계 완벽 가이드. 예약부터 결제까지 모든 과정을 상세히 안내합니다.`}
    steps={howToSteps}
    estimatedTime="PT30M"
  />

  <div class="container mx-auto px-4">
    <div class="text-center mb-16 relative">
      <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-24 h-24 bg-purple-500/10 rounded-full blur-2xl"></div>
      <span class="text-purple-400 font-bold tracking-[0.2em] text-sm md:text-base uppercase mb-3 block">초보자 가이드</span>
      <h2 class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-white via-slate-200 to-slate-400 relative z-10">{region.name} 첫 방문 가이드</h2>
      <p class="text-slate-400 mt-4 max-w-2xl mx-auto">처음이라 걱정되시나요? 예약부터 퇴장까지 5단계로 쉽게 안내해 드립니다.</p>
      <div class="w-1 h-12 bg-gradient-to-b from-purple-500 to-transparent mx-auto mt-6"></div>
    </div>

    <!-- 스텝별 가이드 -->
    <div class="max-w-5xl mx-auto">
      <div class="relative">
        <!-- 연결선 (데스크탑) -->
        <div class="hidden lg:block absolute left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-purple-500 via-purple-500/50 to-transparent -translate-x-1/2"></div>

        {guideSteps.map((step, index) => (
          <div class={`relative flex flex-col lg:flex-row items-center gap-8 mb-12 ${index % 2 === 1 ? 'lg:flex-row-reverse' : ''}`}>
            <!-- 번호 원 -->
            <div class="w-16 h-16 rounded-full bg-purple-600 flex items-center justify-center text-white text-2xl font-bold z-10 flex-shrink-0 shadow-lg shadow-purple-500/30">
              {step.number}
            </div>

            <!-- 콘텐츠 카드 -->
            <div class={`flex-1 bg-slate-800/50 rounded-2xl p-8 border border-slate-700 hover:border-purple-500/30 transition-all ${index % 2 === 1 ? 'lg:text-right' : ''}`}>
              <div class={`flex items-center gap-3 mb-4 ${index % 2 === 1 ? 'lg:flex-row-reverse' : ''}`}>
                <div class="w-10 h-10 bg-purple-500/10 rounded-xl flex items-center justify-center text-purple-500">
                  <step.Icon class="w-5 h-5" />
                </div>
                <h3 class="text-xl font-bold text-white">{step.title}</h3>
              </div>

              <p class="text-slate-300 leading-relaxed mb-4">{step.description}</p>

              <div class={`flex flex-wrap gap-2 ${index % 2 === 1 ? 'lg:justify-end' : ''}`}>
                {step.tips.map((tip) => (
                  <span class="inline-flex items-center gap-1 text-xs text-purple-400 bg-purple-500/10 px-3 py-1 rounded-full">
                    <CheckCircle class="w-3 h-3" />
                    {tip}
                  </span>
                ))}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- CTA 섹션 -->
    <div class="mt-16 text-center bg-gradient-to-r from-purple-900/30 to-fuchsia-900/30 rounded-3xl p-8 md:p-12 border border-purple-500/20 max-w-3xl mx-auto">
      <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">지금 바로 시작하세요</h3>
      <p class="text-slate-400 mb-8">15년 경력 서우실장이 친절하게 안내해 드립니다.</p>

      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href={region.kakaoLink}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-[#FEE500] text-[#3C1E1E] font-semibold rounded-xl transition-all hover:brightness-110 min-h-[48px]"
        >
          <MessageCircle class="w-5 h-5" />
          카카오톡 상담
        </a>
        <a
          href={`tel:${region.phone.replace(/-/g, '')}`}
          class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-purple-600 hover:bg-purple-500 text-white font-semibold rounded-xl transition-colors min-h-[48px]"
        >
          <Phone class="w-5 h-5" />
          전화 상담
        </a>
      </div>
    </div>
  </div>
</section>
