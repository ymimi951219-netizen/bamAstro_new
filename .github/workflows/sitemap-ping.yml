name: Daily Sitemap Ping

on:
  schedule:
    # ë§¤ì¼ ì˜¤ì „ 6ì‹œ KST (UTC 21:00 ì „ë‚ )
    - cron: '0 21 * * *'
  workflow_dispatch: # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  ping-sitemaps:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Google with sitemaps
        run: |
          echo "ğŸš€ Starting sitemap ping to Google..."

          # ëª¨ë“  ì§€ì—­ ì‚¬ì´íŠ¸ ë„ë©”ì¸
          DOMAINS=(
            "high-karaoke.com"      # ê°•ë‚¨
            "hikaraoke.com"         # ë¶„ë‹¹
            "best-karaoke.com"      # ë™íƒ„
            "public-karaoke.net"    # ì¸ê³„ë™
            "public-karaoke.com"    # ìˆ˜ì›
            "korea-karaoke.com"     # í‰íƒ
            "nextkaraoke.com"       # ì•ˆì–‘
            "hot-karaoke.com"       # ìˆ˜ì§€
            "hot-karaoke.net"       # ì•ˆì‚°
            "new-karaoke.com"       # íŒêµ
            "new-karaoke.net"       # ì„±ë‚¨
            "new-hipublic.com"      # ìš©ì¸
          )

          for domain in "${DOMAINS[@]}"; do
            sitemap_url="https://${domain}/sitemap-index.xml"
            ping_url="https://www.google.com/ping?sitemap=${sitemap_url}"

            echo "ğŸ“ Pinging: ${domain}"

            response=$(curl -s -o /dev/null -w "%{http_code}" "${ping_url}")

            if [ "$response" = "200" ]; then
              echo "âœ… ${domain} - Success (HTTP ${response})"
            else
              echo "âŒ ${domain} - Failed (HTTP ${response})"
            fi
          done

          echo "ğŸ Sitemap ping completed!"
