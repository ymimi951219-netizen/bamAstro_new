---
import { PageLayout, ItemListSchema, BreadcrumbSchema, RelatedServices } from '@bamastro/ui';
import { region } from '@/config/region';
import { getAllSituationalGuides } from '@/content/situational-guides';

export const prerender = true;

const guides = getAllSituationalGuides();

const seoProps = {
  title: `${region.name} 유흥 가이드 모음 | 상황별 완벽 안내`,
  description: `${region.name} 유흥 상황별 가이드 모음. 점심·저녁·심야·커플·회식·생일·초보자 등 목적별 맞춤 가이드를 확인하세요.`,
  keywords: [
    `${region.name} 유흥 가이드`,
    `${region.name} 유흥 코스`,
    `${region.name} 유흥 추천`,
  ],
};

const listItems = guides.map((g) => ({
  name: g.titleTemplate.replace('{지역}', region.name),
  url: `/guide/${g.slug}`,
}));
---

<PageLayout {...seoProps} region={region}>
  <BreadcrumbSchema region={region} items={[
    { name: '홈', url: '/' },
    { name: '가이드 모음', url: '/guide/' },
  ]} />
  <ItemListSchema items={listItems} />

  <div class="pt-24 md:pt-32 min-h-screen bg-transparent">
    <div class="container mx-auto px-4 pb-12 max-w-6xl">
      <!-- Title -->
      <div class="text-center mb-16 relative">
        <span class="text-amber-400 font-bold tracking-[0.2em] text-sm md:text-base uppercase mb-3 block">상황별 가이드</span>
        <h1 class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-white via-slate-200 to-slate-400 drop-shadow-sm">
          {region.name} 유흥 가이드 모음
        </h1>
        <p class="text-slate-400 mt-4 text-lg">목적과 상황에 맞는 가이드를 선택하세요</p>
        <div class="w-1 h-12 bg-gradient-to-b from-amber-500 to-transparent mx-auto mt-6"></div>
      </div>

      <!-- Guide Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {guides.map((guide) => (
          <a href={`/guide/${guide.slug}`} class="bg-slate-900/30 p-6 rounded-2xl border border-slate-800/50 backdrop-blur-sm hover:border-purple-500/30 transition-colors group">
            <h2 class="text-xl font-bold text-white mb-3 group-hover:text-purple-400 transition-colors">
              {guide.titleTemplate.replace('{지역}', region.name)}
            </h2>
            <p class="text-sm text-slate-400 line-clamp-3">{guide.intro.slice(0, 150)}...</p>
            <div class="mt-4 flex flex-wrap gap-2">
              {guide.recommendations.slice(0, 2).map((rec) => (
                <span class="text-xs bg-slate-800 text-slate-300 px-2 py-1 rounded">{rec.venueType}</span>
              ))}
            </div>
            <span class="text-purple-400 text-sm mt-4 inline-block group-hover:translate-x-1 transition-transform">자세히 보기 &rarr;</span>
          </a>
        ))}
      </div>

      <RelatedServices region={region} />
    </div>
  </div>
</PageLayout>
