---
import { PageLayout, BreadcrumbSchema, FAQPageSchema, RelatedServices } from '@bamastro/ui';
import { region } from '@/config/region';
import { getAllComparisons, getComparisonContent } from '@/content/venue-comparisons';

export const prerender = true;

export function getStaticPaths() {
  const comparisons = getAllComparisons();
  return comparisons.map((c) => ({
    params: { pair: `${c.venue1Id}-vs-${c.venue2Id}` },
    props: { venue1Id: c.venue1Id, venue2Id: c.venue2Id },
  }));
}

const { venue1Id, venue2Id } = Astro.props;
const content = getComparisonContent(venue1Id, venue2Id);

if (!content) {
  throw new Error(`Comparison not found: ${venue1Id} vs ${venue2Id}`);
}

const v1 = region.venueTypes.find((v) => v.id === venue1Id);
const v2 = region.venueTypes.find((v) => v.id === venue2Id);
const v1Name = v1?.name ?? venue1Id;
const v2Name = v2?.name ?? venue2Id;

const seoProps = {
  title: `${region.name} ${v1Name} vs ${v2Name} 비교 가이드 | 차이점·추천`,
  description: `${region.name} ${v1Name}과 ${v2Name}의 가격, 분위기, 서비스를 상세 비교합니다. 상황별 추천과 FAQ 포함.`,
  keywords: [
    `${v1Name} vs ${v2Name}`,
    `${region.name} ${v1Name} ${v2Name} 비교`,
    `${region.name} 유흥 비교`,
  ],
};
---

<PageLayout {...seoProps} region={region}>
  <BreadcrumbSchema region={region} items={[
    { name: '홈', url: '/' },
    { name: '업종 비교', url: '/compare/' },
    { name: `${v1Name} vs ${v2Name}`, url: `/compare/${venue1Id}-vs-${venue2Id}` },
  ]} />
  {content.faqs.length > 0 && (
    <FAQPageSchema items={content.faqs.map((f) => ({ question: f.q, answer: f.a }))} />
  )}

  <div class="pt-24 md:pt-32 min-h-screen bg-transparent">
    <div class="container mx-auto px-4 pb-12 max-w-6xl">
      <!-- Title -->
      <div class="text-center mb-16 relative">
        <span class="text-amber-400 font-bold tracking-[0.2em] text-sm md:text-base uppercase mb-3 block">업종 비교</span>
        <h1 class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-white via-slate-200 to-slate-400 drop-shadow-sm">
          {v1Name} vs {v2Name}
        </h1>
        <div class="w-1 h-12 bg-gradient-to-b from-amber-500 to-transparent mx-auto mt-6"></div>
      </div>

      <!-- Intro -->
      <div class="mb-12 bg-slate-900/30 p-8 rounded-2xl border border-slate-800/50 backdrop-blur-sm">
        <p class="text-lg text-slate-300 leading-relaxed font-light">{content.intro}</p>
      </div>

      <!-- Comparison Table -->
      <div class="mb-12 overflow-x-auto">
        <table class="w-full text-left border-collapse">
          <thead>
            <tr class="border-b border-slate-700">
              <th class="py-3 px-4 text-purple-400">항목</th>
              <th class="py-3 px-4 text-amber-400">{v1Name}</th>
              <th class="py-3 px-4 text-amber-400">{v2Name}</th>
            </tr>
          </thead>
          <tbody class="text-sm text-slate-300">
            {content.dimensions.map((d) => (
              <tr class="border-b border-slate-800">
                <td class="py-3 px-4 font-bold text-white">{d.dimension}</td>
                <td class="py-3 px-4">{d.venue1}</td>
                <td class="py-3 px-4">{d.venue2}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <!-- Situational Recommendation -->
      <div class="mb-12 bg-slate-900/30 p-8 rounded-2xl border border-slate-800/50 backdrop-blur-sm">
        <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-3">
          <div class="w-1.5 h-8 bg-purple-500 rounded-full"></div>
          상황별 추천
        </h2>
        <p class="text-slate-300 leading-relaxed font-light">{content.situationalRecommendation}</p>
      </div>

      <!-- FAQ -->
      {content.faqs.length > 0 && (
        <div class="mb-12 bg-purple-900/10 p-8 rounded-2xl border border-purple-500/20">
          <h2 class="text-2xl font-bold text-white mb-6">자주 묻는 질문 (FAQ)</h2>
          <div class="space-y-6">
            {content.faqs.map((faq) => (
              <div>
                <p class="font-bold text-purple-400 mb-1">Q. {faq.q}</p>
                <p class="text-slate-300 text-sm">A. {faq.a}</p>
              </div>
            ))}
          </div>
        </div>
      )}

      <RelatedServices region={region} />
    </div>
  </div>
</PageLayout>
